/**
 * --------------------------------------------------------------------
 * jQuery accessible tabs plugin
 * Author: Scott Jehl, scott@filamentgroup.com
 * Copyright (c) 2009 Filament Group 
 * licensed under MIT (filamentgroup.com/examples/mit-license.txt)
 * --------------------------------------------------------------------
 */

jQuery.fn.tabs=function(settings){var o=$.extend({updateHash:false,autoRotate:false,alwaysScrollToTop:true},settings);return $(this).each(function(){var tabs=$(this);var tabsNav=tabs.find('nav');var tabsBody=tabs.find('.tab-container');var tabIDprefix='tab-';var tabIDsuffix='-enhanced';tabsNav.addClass('tabs-nav').attr('role','tablist');tabsBody.addClass('tabs-body');tabsBody.find('.tab-content').each(function(){$(this).addClass('tabs-panel').attr('role','tabpanel').attr('aria-hidden',true).attr('aria-labelledby',tabIDprefix+$(this).attr('id')).attr('id',$(this).attr('id')+tabIDsuffix);});tabsNav.find('a').each(function(){$(this).attr('role','tab').attr('id',tabIDprefix+$(this).attr('href').split('#')[1]);});tabsNav.find('a').attr('tabindex','-1');function selectTab(tab,fromHashChange){tabsNav.find('a.tabs-selected').removeClass('tabs-selected').attr('tabindex','-1');tab.attr('tabindex','0').addClass('tabs-selected').focus();tabsBody.find('div.tabs-panel-selected').attr('aria-hidden',true).removeClass('tabs-panel-selected');$(tab.attr('href')+tabIDsuffix).addClass('tabs-panel-selected').attr('aria-hidden',false);if(o.updateHash){location.hash=tab.attr('href');}};tabsNav.find('a').click(function(e){selectTab($(this));e.preventDefault();}).keydown(function(event){var currentTab=$(this).parent();var ret=true;switch(event.keyCode){case 37:case 38:if(currentTab.prev().size()>0){selectTab(currentTab.prev().find('a'));currentTab.prev().find('a').eq(0).focus();ret=false;} break;case 39:case 40:if(currentTab.next().size()>0){selectTab(currentTab.next().find('a'));currentTab.next().find('a').eq(0).focus();ret=false;} break;case 36:selectTab(tabsNav.find('li:first a'));tabsNav.find('li:first a').eq(0).focus();ret=false;break;case 35:selectTab(tabsNav.find('li:last a'));tabsNav.find('li:last a').eq(0).focus();ret=false;break;} return ret;});tabs.bind('click keydown focus',function(){if(o.autoRotate){clearInterval(tabRotator);}});function selectTabFromHash(hash){var currHash=hash||window.location.hash;var hashedTab=tabsNav.find('a[href=#'+currHash.replace('#','')+']');if(hashedTab.size()>0){selectTab(hashedTab,true);} else{selectTab(tabsNav.find('a:first'),true);} return!!hashedTab.size();} selectTabFromHash(null,true);if(o.updateHash){$(window).bind("hashchange",function(){var newHash=location.hash;selectTabFromHash(newHash,true);});} if(o.autoRotate){var tabRotator=setInterval(function(){var currentTabLI=tabsNav.find('li.tabs-selected');var nextTab=currentTabLI.next();if(nextTab.length){selectTab(nextTab.find('a'),false);} else{selectTab(tabsNav.find('a:first'),false);}},o.autoRotate);} if(o.alwaysScrollToTop){$(window)[0].scrollTo(0,0);}});};
jQuery.fn.destroyTabs=function(){var tabs=$(this);var tabsNav=tabs.find('nav');var tabsBody=tabs.find('.tab-container');var tabIDprefix='tab-';var tabIDsuffix='-enhanced';tabsNav.removeClass('tabs-nav').removeAttr('role');tabsBody.removeClass('tabs-body');tabsBody.find('.tab-content').each(function(){$(this).removeClass('tabs-panel').removeAttr('role').removeAttr('aria-hidden').removeAttr('aria-labelledby').attr('id',$(this).attr('id').replace(tabIDsuffix,''));});tabsNav.find('a').each(function(){$(this).removeAttr('role').removeAttr('id');});tabsNav.find('a').removeAttr('tabindex','-1');tabsNav.find('a.tabs-selected').removeClass('tabs-selected').removeAttr('tabindex');tabsBody.find('div.tabs-panel-selected').removeAttr('aria-hidden').removeClass('tabs-panel-selected');tabs.off('click keydown focus');};